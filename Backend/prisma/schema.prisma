generator client{
  provider="prisma-client-js"
}

datasource db{
  provider = "mysql"
  url = env("DATABASE_URL")
}

model Usuario{
  id Int @id @default(autoincrement())
  nome String
  email String @unique
  senha String
  telefone String
  idade Int
  perfil Perfil @default(PACIENTE)
  cuidador Usuario? @relation("Cuidadores", fields:[cuidadorId], references:[id])
  cuidadorId Int?
  pacientes Usuario[] @relation("Cuidadores")
  dadosSaude DadosSaude?
  medicoes Medicao[]
  resetToken String?    
  resetTokenExpiry DateTime?
  associacaoToken String?
  associacaoTokenExpiry DateTime?
  criadoEm DateTime @default(now())
  @@map("usuarios")
}

model Medicao{
  id Int @id @default(autoincrement())
  usuario Usuario @relation(fields: [usuarioId], references: [id])
  usuarioId Int
  sistolica Int
  diastolica Int
  status String    
  observacao String? 
  dataMedicao DateTime   @default(now())
  @@map("medicoes")
}

model DadosSaude {
  id Int @id @default(autoincrement())
  usuario Usuario @relation(fields: [usuarioId], references: [id])
  usuarioId Int @unique
  pressaoSistolicaNormal Int? @default(120)
  pressaoDiastolicaNormal Int? @default(80)
  dataDefinicao DateTime @default(now())
  @@map("dados_saude")
}

enum Perfil{
  ADMIN
  PACIENTE
  CUIDADOR
}